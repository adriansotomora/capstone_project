# Capstone Project: Optimizing Promoter Efficiency

This project analyzes client data to identify and address inefficiencies in promoter visits, aiming to optimize resource allocation and improve profitability.

## Project Overview

The core objective is to classify clients into different segments based on their value (ticket size) and the efficiency of promoter interactions. The project identifies "High-Ticket Inefficient" and "Low-Ticket Inefficient" clients as primary targets for optimization. By analyzing the patterns of efficient clients, the project aims to provide actionable recommendations for the number of promoter visits for inefficient clients.

## Notebooks

The project is structured across several Jupyter notebooks:

*   **`scripts/preprocessing.ipynb`**: This notebook handles the initial data loading, cleaning, and feature engineering. It processes the raw order data, calculates key metrics like efficiency and cost, and prepares the datasets for modeling.
*   **`scripts/model_adrian.ipynb`**: This notebook develops a predictive model to determine the optimal number of promoter visits for inefficient clients. It uses a regression model trained on efficient clients to predict the ideal visit frequency for inefficient ones.
*   **`scripts/model_cata.ipynb`**: This notebook focuses on an optimization model to determine the optimal number of visits for inefficient clients, considering cost and efficiency targets. It uses linear programming to find the best visit allocation.
*   **`scripts/model_sebas.ipynb`**: This notebook provides a descriptive and diagnostic analysis of client segments. It explores the characteristics of inefficient clients and uses clustering to identify distinct subgroups within the inefficient population.
*   **`scripts/nacho_clustered_model.ipynb`**: This notebook appears to be related to clustering models, likely as part of the work done in `model_sebas.ipynb`.

## Getting Started

### Prerequisites

*   Python 3.x
*   Conda

### Installation

1.  **Clone the repository:**
    ```bash
    git clone <repository-url>
    cd capstone_project
    ```

2.  **Create and activate the Conda environment:**
    ```bash
    conda env create -f environment.yml
    conda activate capstone-project
    ```

3.  **Install a solver for the optimization model (optional, for `model_cata.ipynb`):**
    The optimization notebook uses the CBC solver. You can install it via Homebrew on macOS or through other package managers on different systems.
    ```bash
    # On macOS with Homebrew
    brew install cbc
    ```

### Running the Notebooks

1.  **Start Jupyter Lab or Jupyter Notebook:**
    ```bash
    jupyter lab
    ```
2.  Navigate to the `scripts` directory and run the notebooks in the following order:
    1.  `preprocessing.ipynb`
    2.  `model_adrian.ipynb`
    3.  `model_cata.ipynb`
    4.  `model_sebas.ipynb`

## Key Findings

*   **Client Segmentation:** Clients are segmented into four categories based on their median ticket and efficiency: High-Ticket Efficient, Low-Ticket Efficient, High-Ticket Inefficient, and Low-Ticket Inefficient.
*   **Inefficiency Drivers:** The analysis suggests that inefficiency is primarily behavioral (too many visits for the number of orders) and not directly driven by the client's profit size.
*   **Optimization Models:** Both a predictive model (XGBoost) and a prescriptive optimization model (Pyomo with CBC solver) are used to recommend optimal visit frequencies for inefficient clients.
*   **Potential Savings:** The optimization models project significant potential cost savings by adjusting promoter visit schedules.

## Data

*   **Raw Data:** `data/raw/Orders_Master_Data(in).xlsx`
*   **Processed Data:** The `data/processed` directory contains the cleaned and transformed datasets generated by the `preprocessing.ipynb` notebook.
    *   `clients.csv`
    *   `orders.csv`
    *   `orders_raw.csv`
    *   `clients_monthly.csv`

## Contributing

Please feel free to submit pull requests or open issues to improve the project.